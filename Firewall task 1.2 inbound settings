import winreg as reg

def task_9_1_2():
    def check_inbound_setting():
        try:
            key = reg.OpenKey(reg.HKEY_LOCAL_MACHINE, r"SOFTWARE\Policies\Microsoft\WindowsFirewall\DomainProfile")
            value, reg_type = reg.QueryValueEx(key, "DefaultInboundAction")
            reg.CloseKey(key)

            if value == 1:
                print("The inbound connections are blocked.")
            else:
                print("The inbound connections are not blocked. Applying the recommended setting...")
                set_inbound_setting()
        except FileNotFoundError:
            print("The inbound connection setting was not found. Applying the recommended setting...")
            set_inbound_setting()
        except Exception as e:
            print(f"An error occurred: {e}")

    def set_inbound_setting():
        try:
            key = reg.OpenKey(reg.HKEY_LOCAL_MACHINE, r"SOFTWARE\Policies\Microsoft\WindowsFirewall\DomainProfile", 0, reg.KEY_SET_VALUE)
            reg.SetValueEx(key, "DefaultInboundAction", 0, reg.REG_DWORD, 1)  # 1 blocks inbound connections
            reg.CloseKey(key)
            print("The inbound setting has been updated to the recommended value.")
        except Exception as e:
            print(f"An error occurred: {e}")

    check_inbound_setting()
